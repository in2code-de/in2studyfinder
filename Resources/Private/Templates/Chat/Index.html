<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
			xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
			data-namespace-typo3-fluid="true">

<f:asset.script identifier="in2studyfinderChatbot" type="module"
								src="EXT:in2studyfinder/Resources/Public/JavaScript/chatbot.js"/>

<f:if condition="{settings.isWidget}">
	<f:then>
		<div class="chatbotwidget-container" data-chatbot-container-widget data-chatbot-url="{f:uri.action(action: 'chat', pageType: 1749648666, absolute: 1)}">
			<div class="chatbot-header">
				<h2>{settings.chatbotName -> f:or(alternative: 'ChatBot Assistant')} <span class="status-indicator"></span></h2>
				<button class="toggle-btn" data-chatbot-toggle>−</button>
			</div>

			<div class="chatbotwidget-body" data-chatbotwidget-body>
				<div class="chatbot-messages" data-chatbot-messages>
					<div class="message assistant">
						{settings.welcomeMessage -> f:or(alternative: 'Willkommen! Ich bin dein virtueller Assistant. Wie kann ich dir heute helfen?')}
					</div>
				</div>

				<div class="defaultprompts" data-defaultprompts data-prompts="{settings.defaultPrompts}">
					<!-- Default prompts will be populated by JavaScript -->
				</div>

				<div class="chatbot-input">
					<textarea class="chatbot-input" data-chatbot-input placeholder="{f:translate(key:'LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:chatbot.textarea.placeholder')}" rows="1"></textarea>
					<button class="chatbot-send" data-chatbot-send><f:translate key="LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:chatbot.button.send"/></button>
					<button class="delete-btn" data-action-url="{f:uri.action(action: 'deleteHistory', pageType: 1749648666, absolute: 1)}" data-chatbot-delete title="Delete conversation"><core:icon identifier="actions-delete" /></button>
				</div>
			</div>
		</div>
	</f:then>
	<f:else>
		<div class="chatbot-search-container" data-chatbot-container data-chatbot-url="{f:uri.action(action: 'chat', pageType: 1749648666, absolute: 1)}">
			<div class="chatbot-search-header">
				<h3 class="chatbot-search-title">{settings.chatbotName -> f:or(alternative: 'ChatBot Assistant')}</h3>
				<button class="chatbot-hidden-toggle" data-chatbot-toggle style="display: none;">−</button>
			</div>

			<div class="chatbot-search-body" data-chatbotwidget-body>
				<div class="chatbot-search-input-wrapper">
					<textarea class="chatbot-search-input" data-chatbot-input placeholder="{f:translate(key:'LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:chatbot.textarea.placeholder')}" rows="1"></textarea>
					<button class="chatbot-search-btn" data-chatbot-send>
						<f:translate key="LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:chatbot.button.send"/>
					</button>
				</div>

				<div class="defaultprompts chatbot-search-prompts" data-defaultprompts data-prompts="{settings.defaultPrompts}">
					<!-- Default prompts will be populated by JavaScript -->
				</div>

				<div class="chatbot-messages chatbot-search-results" data-chatbot-messages>
					<!-- Search results will appear here -->
				</div>

				<div class="chatbot-search-actions">
					<button class="chatbot-search-clear-btn" data-action-url="{f:uri.action(action: 'deleteHistory', pageType: 1749648666, absolute: 1)}" data-chatbot-delete title="Clear search history">
						<f:translate key="LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:chatbot.button.clear"/>
					</button>
				</div>
			</div>
		</div>
	</f:else>
</f:if>
